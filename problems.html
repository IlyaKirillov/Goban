<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Web Go/Baduk Board</title>
    <script type="text/javascript" language="JavaScript" src="javascripts/goboardmin.js"></script>
    <script type="text/javascript" language="JavaScript" src="javascripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" language="JavaScript" src="javascripts/main.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheets/main.css">
    <link rel="icon" href="files/favicon.ico" type="image/x-icon">
</head>
<body></body>

<script>

    OnDocumentReadyProblems();

    var aSgfs = [];
    var g_nSgfIndex = 0;
    $(function ()
    {
        $.get('files/xxqj.sgf',function(sFile)
        {
            var nCurPos = -1;
            while (-1 !== (nCurPos = sFile.indexOf("(;GM[1]FF[3]SZ[19]", nCurPos + 1)))
            {
                var nNextPos = sFile.indexOf("(;GM[1]FF[3]SZ[19]", nCurPos + 1);
                if (-1 === nNextPos)
                    nNextPos = sFile.length;

                var sSgf = sFile.substr(nCurPos, nNextPos - nCurPos);
                aSgfs.push(sSgf);
            }

            if (aSgfs.length > 0)
            {
                g_nSgfIndex = 0;
                Load_Problem();
            }
        });
    });

    function Load_Problem()
    {
        GoBoardApi.Load_Sgf(oGameTree, aSgfs[g_nSgfIndex], {Auto : true});
    }

    function OnClickNextProblem()
    {
        if (aSgfs.length > 0)
        {
            g_nSgfIndex++;
            if (g_nSgfIndex >= aSgfs.length)
                g_nSgfIndex = 0;
            Load_Problem();
        }
    }

    function OnClickPrevProblem()
    {
        if (aSgfs.length > 0)
        {
            g_nSgfIndex--;
            if (g_nSgfIndex < 0)
                g_nSgfIndex = aSgfs.length - 1;
            Load_Problem();
        }
    }


    function Add_NextProblemButton()
    {
        var oInput = document.createElement("input");
        oInput.style.position = "absolute";
        oInput.style.top      = "1px";
        oInput.style.left     = "750px";
        oInput.style.height   = "30px";
        oInput.type           = "button";
        oInput.value          = "Next problem";
        oInput.onclick = OnClickNextProblem;

        var oInputPrev = document.createElement("input");
        oInputPrev.style.position = "absolute";
        oInputPrev.style.top      = "1px";
        oInputPrev.style.left     = "650px";
        oInputPrev.style.height   = "30px";
        oInputPrev.type           = "button";
        oInputPrev.value          = "Prev problem";
        oInputPrev.onclick = OnClickPrevProblem;

        var aBody = document.getElementsByTagName('body');

        if (aBody.length > 0)
        {
            var oBody = aBody[0];
            oBody.appendChild(oInput);
            oBody.appendChild(oInputPrev);
        }
    }
    Add_NextProblemButton();
    

</script>

</html>
